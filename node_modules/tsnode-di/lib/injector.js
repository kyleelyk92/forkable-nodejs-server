"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("reflect-metadata");
var Injector;
(function (Injector) {
    var INSTANCE_TABLE = new Map();
    // A map where all registered injectables will be stored
    var injectables = new Map();
    // resolving instances
    Injector.resolve = function (target) {
        var injectable = INSTANCE_TABLE.get(target.name);
        if (injectable !== undefined) {
            return injectable;
        }
        // tokens are required dependencies, while injections are resolved tokens from the Injector
        var tokens = Reflect.getMetadata("design:paramtypes", target) || [];
        var injections = tokens.map(function (token) { return Injector.resolve(token); });
        injectable = new (target.bind.apply(target, [void 0].concat(injections)))();
        INSTANCE_TABLE.set(target.name, injectable);
        return injectable;
    };
    // store injectables within the injector
    Injector.set = function (target) {
        injectables.set(target.name, target);
    };
})(Injector = exports.Injector || (exports.Injector = {}));
